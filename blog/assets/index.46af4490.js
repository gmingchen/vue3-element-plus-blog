var U=Object.defineProperty,J=Object.defineProperties;var K=Object.getOwnPropertyDescriptors;var T=Object.getOwnPropertySymbols;var M=Object.prototype.hasOwnProperty,R=Object.prototype.propertyIsEnumerable;var E=(e,t,l)=>t in e?U(e,t,{enumerable:!0,configurable:!0,writable:!0,value:l}):e[t]=l,h=(e,t)=>{for(var l in t||(t={}))M.call(t,l)&&E(e,l,t[l]);if(T)for(var l of T(t))R.call(t,l)&&E(e,l,t[l]);return e},C=(e,t)=>J(e,K(t));import{g as S,y as V,X as B,B as w,C as H,Y as $,a4 as A,ai as q,aj as P,o as p,i as b,w as i,J as X,q as n,K as _,L as v,ae as j,am as Y,k as D,H as z,I as G,a3 as Q,a2 as I,af as L,an as W,a1 as Z,a6 as x,ak as ee,at as te,al as ae,r as le,j as N,ah as oe}from"./vendor.9347675a.js";import{s as y}from"./request.814c4204.js";/* empty css                        *//* empty css                   *//* empty css                  *//* empty css                  *//* empty css                   *//* empty css                     */import{_ as F,e as ne}from"./index.84770b9f.js";function se(){return y({url:"/console/config/list",method:"get"})}function ie(e){return y({url:"/console/config/info",method:"get",params:e})}function re(e){return y({url:"/console/config/update",method:"post",data:e})}function de(e){return y({url:"/console/config/status",method:"post",data:e})}const ue=S({emits:["refresh"],setup(e,{emit:t}){const{t:l}=V(),c=B(),o=w({visible:!1,loading:!1,id:null,form:null,keys:[]}),g=async r=>{if(o.visible=!0,o.loading=!0,o.id=r,o.id){const d=await ie({id:o.id});if(d&&d.data){o.form=JSON.parse(d.data);for(const m in o.form)Object.hasOwnProperty.call(o.form,m)&&o.keys.push(m)}}$(()=>{o.loading=!1})},a=()=>{c.value.validate(async r=>{if(r){const d={id:o.id,value:JSON.stringify(o.form)};await re(d)&&(o.visible=!1,A({message:l("tip.success"),type:"success"}),t("refresh"))}})},f=()=>{o.form=null,o.keys=[]};return C(h({t:l,refForm:c},H(o)),{init:g,submit:a,dialogClosedHandle:f})}}),pe={class:"dialog-footer"};function ce(e,t,l,c,o,g){const a=W,f=Z,r=Q,d=I,m=q,k=L,u=P("repeat");return p(),b(m,{modelValue:e.visible,"onUpdate:modelValue":t[3]||(t[3]=s=>e.visible=s),width:"500px",title:e.t("button.set"),"close-on-click-modal":!1,onClosed:e.dialogClosedHandle},{footer:i(()=>[X("span",pe,[n(d,{onClick:t[1]||(t[1]=s=>e.visible=!1)},{default:i(()=>[_(v(e.t("button.cancel")),1)]),_:1}),j((p(),b(d,{type:"primary",onClick:t[2]||(t[2]=s=>e.submit())},{default:i(()=>[_(v(e.t("button.confirm")),1)]),_:1})),[[u]])])]),default:i(()=>[j((p(),b(r,{ref:"refForm",model:e.form,"label-position":"top",onKeyup:t[0]||(t[0]=Y(s=>e.submit(),["enter"]))},{default:i(()=>[(p(!0),D(G,null,z(e.keys,s=>(p(),b(f,{key:s,label:s},{default:i(()=>[n(a,{modelValue:e.form[s],"onUpdate:modelValue":O=>e.form[s]=O,placeholder:s},null,8,["modelValue","onUpdate:modelValue","placeholder"])]),_:2},1032,["label"]))),128))]),_:1},8,["model"])),[[k,e.loading]])]),_:1},8,["modelValue","title","onClosed"])}var fe=F(ue,[["render",ce]]);const me=S({components:{Set:fe},setup(){const{t:e}=V(),t=B(),l=w({loading:!1,visible:!1,list:[],STATUS:ne}),c=()=>{l.loading=!0,se().then(a=>{a&&(l.list=a.data),$(()=>{l.loading=!1})})},o=a=>{oe.confirm(e("tip.confirmOperationTip",[a.id,e(`table.${a.status===1?"disable":"enable"}`)]),e("tip.title"),{confirmButtonText:e("button.confirm"),cancelButtonText:e("button.cancel"),type:"warning"}).then(()=>{const f={key:a.id,value:a.status===1?0:1};de(f).then(r=>{r&&(A({message:e("tip.success"),type:"success"}),c())})}).catch(()=>{})},g=a=>{l.visible=!0,$(()=>{t.value.init(a.id)})};return x(()=>{c()}),C(h({t:e,refSet:t},H(l)),{getList:c,statusHandle:o,setHandle:g})}});function be(e,t,l,c,o,g){const a=ee,f=te,r=I,d=ae,m=le("Set"),k=L;return p(),D("div",null,[j((p(),b(d,{border:"",data:e.list},{default:i(()=>[n(a,{align:"center",label:"ID",prop:"id",width:"80"}),n(a,{align:"center",label:e.t("column.name"),prop:"name"},null,8,["label"]),n(a,{align:"center",label:e.t("column.key"),prop:"json_key"},null,8,["label"]),n(a,{align:"center",label:e.t("column.value"),prop:"json_value","show-overflow-tooltip":""},null,8,["label"]),n(a,{align:"center",label:e.t("table.remark"),prop:"remark"},null,8,["label"]),n(a,{align:"center",label:e.t("table.status"),prop:"status"},{default:i(({row:u})=>[n(f,{type:u.status===1?"success":"danger"},{default:i(()=>[_(v(e.STATUS.getLabel(u.status)),1)]),_:2},1032,["type"])]),_:1},8,["label"]),n(a,{align:"center",label:e.t("table.createTime"),prop:"created_at",width:"160"},null,8,["label"]),n(a,{align:"center",label:e.t("table.updateTime"),prop:"updated_at",width:"160"},null,8,["label"]),n(a,{align:"center",label:e.t("table.operation"),width:"110",fixed:"right"},{default:i(({row:u})=>[u.status===0?(p(),b(r,{key:0,type:"text",onClick:s=>e.statusHandle(u)},{default:i(()=>[_(v(e.t(u.status===1?"table.disable":"table.enable")),1)]),_:2},1032,["onClick"])):N("",!0),n(r,{type:"text",onClick:s=>e.setHandle(u)},{default:i(()=>[_(v(e.t("button.set")),1)]),_:2},1032,["onClick"])]),_:1},8,["label"])]),_:1},8,["data"])),[[k,e.loading]]),e.visible?(p(),b(m,{key:0,ref:"refSet",onRefresh:e.getList},null,8,["onRefresh"])):N("",!0)])}var Ee=F(me,[["render",be],["__scopeId","data-v-2294d7e2"]]);export{Ee as default};
