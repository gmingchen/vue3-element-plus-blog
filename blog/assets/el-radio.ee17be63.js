var f=Object.defineProperty,v=Object.defineProperties;var g=Object.getOwnPropertyDescriptors;var p=Object.getOwnPropertySymbols;var k=Object.prototype.hasOwnProperty,h=Object.prototype.propertyIsEnumerable;var u=(e,a,s)=>a in e?f(e,a,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[a]=s,c=(e,a)=>{for(var s in a||(a={}))k.call(a,s)&&u(e,s,a[s]);if(p)for(var s of p(a))h.call(a,s)&&u(e,s,a[s]);return e},d=(e,a)=>v(e,g(a));import{aG as y,h as w,g as C,u as S,B as b,C as E,a4 as U,r as B,aH as $,o as r,i,w as H,k as G}from"./vendor.9347675a.js";import{b as K,a as j,_ as R,S as T}from"./index.84770b9f.js";import{b as A,s as D}from"./request.814c4204.js";function I(e,a){const s=y().proxy;return w({get(){return e[a]},set(t){s.$emit(`update:${a}`,t)}})}function m(){return A()+"/console/oss/upload"}function x(e,a=!1,s={}){const t=new FormData;return t.append("file",e),t.append("watermark",a),t.append("params",s),D({url:m(),method:"post",headers:{"Content-Type":K.upload},data:t})}const M=C({props:{url:{type:String},watermark:{type:Boolean,default:!1}},emits:["update:url","update:watermark"],setup(e){const a=S(),s=b({action:m(),tokenKey:j,token:a.state.user.token}),t=I(e,"url"),n=()=>{},l=o=>{T.includes(o.code)?t.value=o.data.url:U({message:o.message,type:"warning"})};return d(c({},E(s)),{thisUrl:t,beforeHandle:n,successHandle:l})}}),O=["src"];function q(e,a,s,t,n,l){const o=B("GSvg"),_=$;return r(),i(_,{class:"uploader",action:e.action,headers:{[e.tokenKey]:e.token},data:{watermark:e.watermark},"show-file-list":!1,"before-upload":e.beforeHandle,"on-success":e.successHandle,accept:"image/*"},{default:H(()=>[e.thisUrl?(r(),G("img",{key:0,src:e.thisUrl,class:"avatar"},null,8,O)):(r(),i(o,{key:1,name:"plus"}))]),_:1},8,["action","headers","data","before-upload","on-success"])}var z=R(M,[["render",q],["__scopeId","data-v-d312c1e2"]]);export{z as _,x as u};
